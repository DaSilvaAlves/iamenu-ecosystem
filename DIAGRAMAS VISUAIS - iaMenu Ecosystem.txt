
â— ğŸ›ï¸ DIAGRAMAS VISUAIS - iaMenu Ecosystem

  Aqui estÃ£o os desenhos para vocÃª entender a arquitetura:

  ---
  1ï¸âƒ£ ARQUITETURA GERAL (Vista de HelicÃ³ptero)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                     IAMENU ECOSYSTEM - VISÃƒO GERAL                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            ğŸŒ INTERNET
                                 â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                             â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
           â”‚   ProduÃ§Ã£o    â”‚           â”‚  Desenvolvimento
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
           â”‚ Vercel        â”‚           â”‚ Localhost      â”‚
           â”‚ (Frontend)    â”‚           â”‚ (MÃ¡quina Local)â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚   FRONTEND REACT 5173     â”‚
                      â”‚  (Vite Dev Server)        â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚    CORS MIDDLEWARE       â”‚
                      â”‚  (Standardizado Agora)   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                    â”‚                    â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
       â”‚   PORT 3001 â”‚     â”‚   PORT 3002 â”‚    â”‚   PORT 3003 â”‚
       â”‚  COMMUNITY  â”‚     â”‚ MARKETPLACE â”‚    â”‚   ACADEMY   â”‚
       â”‚    API      â”‚     â”‚    API      â”‚    â”‚    API      â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚                   â”‚                   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                          â”‚   PORT 3004  â”‚
                          â”‚   BUSINESS   â”‚
                          â”‚     API      â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  PostgreSQL 5432       â”‚
                      â”‚  (Banco de Dados)      â”‚
                      â”‚  4 Schemas:            â”‚
                      â”‚  - community (16 tbl)  â”‚
                      â”‚  - marketplace (10 tbl)â”‚
                      â”‚  - academy (5 tbl)     â”‚
                      â”‚  - business (6 tbl)    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ---
  2ï¸âƒ£ PORTAS - O "QUEBRA-CABEÃ‡AS" EXPLICADO

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              MAPA DE PORTOS (O Grande Puzzle!)          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                                                          â”‚
  â”‚  ğŸŒ FRONTEND (AplicaÃ§Ã£o React que vocÃª acessa):         â”‚
  â”‚  â”œâ”€ http://localhost:5173  â† PORTA PRINCIPAL          â”‚
  â”‚  â”œâ”€ http://localhost:5174  â† BACKUP (se 5173 ocupada) â”‚
  â”‚  â””â”€ http://localhost:5175  â† BACKUP (alternativa)      â”‚
  â”‚                                                          â”‚
  â”‚  ğŸ“± APIs (Servidores Node.js que o Frontend chama):     â”‚
  â”‚  â”œâ”€ http://localhost:3001  â† Community (Posts, Grupos) â”‚
  â”‚  â”œâ”€ http://localhost:3002  â† Marketplace (Fornecedores)â”‚
  â”‚  â”œâ”€ http://localhost:3003  â† Academy (Cursos)          â”‚
  â”‚  â””â”€ http://localhost:3004  â† Business (Dashboard)      â”‚
  â”‚                                                          â”‚
  â”‚  ğŸ—„ï¸ DATABASE (Banco de Dados - PostgreSQL):            â”‚
  â”‚  â””â”€ localhost:5432  â† Porta padrÃ£o PostgreSQL         â”‚
  â”‚                                                          â”‚
  â”‚  âš ï¸ IMPORTANTE: NÃƒO sÃ£o hierÃ¡rquicas!                   â”‚
  â”‚     SÃ£o 4 APIs INDEPENDENTES que o Frontend chama       â”‚
  â”‚                                                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ---
  3ï¸âƒ£ FLUXO DE UMA REQUISIÃ‡ÃƒO (Como tudo se conecta)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚        QUANDO VOCÃŠ CLICA EM ALGO NO FRONTEND                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  PASSO 1: VocÃª abre http://localhost:5173 no browser
            â”‚
            â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ BROWSER CARREGA REACT APP (5173)       â”‚
           â”‚ - HTML + CSS + JavaScript              â”‚
           â”‚ - React comeÃ§a a rodar                 â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
  PASSO 2: React obtÃ©m token de autenticaÃ§Ã£o
           â”‚
           â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ GET http://localhost:3001/           â”‚
          â”‚     api/v1/community/auth/test-token â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼ (Passa por CORS middleware)
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Community API (porta 3001)        â”‚
          â”‚ Valida origem (5173 âœ“)           â”‚
          â”‚ Retorna JWT token                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼ (Token armazenado em localStorage)
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Frontend recebe token e guarda    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
  PASSO 3: VocÃª clica em "NotificaÃ§Ãµes"
          â”‚
          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ GET /api/v1/community/notificationsâ”‚
         â”‚ Header: "Authorization: Bearer XXX"â”‚  â† Token incluÃ­do aqui
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼ (Passa por CORS middleware)
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Community API (porta 3001)         â”‚
         â”‚ 1. Valida origem (5173 âœ“)         â”‚
         â”‚ 2. Valida token (JWT_SECRET âœ“)   â”‚
         â”‚ 3. Carrega notificaÃ§Ãµes da DB     â”‚
         â”‚ 4. Retorna dados                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼ (Com CORS headers incluÃ­dos)
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ React recebe dados                 â”‚
         â”‚ Renderiza lista de notificaÃ§Ãµes    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ---
  4ï¸âƒ£ A CONFUSÃƒO DE PORTAS EXPLICADA (Por que 3001 e nÃ£o 3004?)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   QUANDO O README DIZIA UMA COISA E O CÃ“DIGO FAZIA OUTRA  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ“– O QUE O README DIZIA (ERRADO):
     Community API: 3004 âŒ
     Marketplace:   3005 âŒ
     Business:      3002 âŒ
     Academy:       (nÃ£o mencionava)

  ğŸ’» O QUE O CÃ“DIGO REALMENTE FAZIA (CERTO):
     Community API: 3001 âœ…
     Marketplace:   3002 âœ…
     Academy:       3003 âœ…
     Business:      3004 âœ…

  ğŸ” POR QUE ACONTECEU?
     - AlguÃ©m escreveu o README numa versÃ£o antiga
     - Depois mudou as portas no cÃ³digo
     - Esqueceu de atualizar o README
     - Resultado: confusÃ£o total! ğŸ˜…

  âœ… AGORA ESTÃ CORRETO:
     .env files â†’ Portas corretas 3001-3004
     README.md â†’ Atualizado para portas corretas
     ARCHITECTURE.md â†’ DocumentaÃ§Ã£o completa

  ---
  5ï¸âƒ£ ESTRUTURA DE PASTAS (Como estÃ¡ organizado o cÃ³digo)

  iamenu-ecosystem/
  â”‚
  â”œâ”€â”€ ğŸ“ frontend/                    â† AplicaÃ§Ã£o React (Vite)
  â”‚   â””â”€â”€ apps/
  â”‚       â””â”€â”€ prototype-vision/       â† A aplicaÃ§Ã£o web (porta 5173)
  â”‚           â”œâ”€â”€ src/
  â”‚           â”‚   â”œâ”€â”€ config/api.ts   â† URLs das APIs
  â”‚           â”‚   â”œâ”€â”€ lib/api/        â† Cliente HTTP (Axios)
  â”‚           â”‚   â””â”€â”€ components/     â† Componentes React
  â”‚           â”œâ”€â”€ .env                â† URLs das APIs
  â”‚           â””â”€â”€ vite.config.ts      â† Config build
  â”‚
  â”œâ”€â”€ ğŸ“ services/                    â† APIs Backend (4 serviÃ§os)
  â”‚   â”œâ”€â”€ community/                  â† Porta 3001
  â”‚   â”‚   â”œâ”€â”€ src/
  â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts            â† Inicia servidor
  â”‚   â”‚   â”‚   â”œâ”€â”€ app.ts              â† Express app + CORS
  â”‚   â”‚   â”‚   â”œâ”€â”€ routes/             â† Endpoints
  â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/         â† Auth, validaÃ§Ã£o
  â”‚   â”‚   â”‚   â””â”€â”€ prisma/             â† Banco de dados
  â”‚   â”‚   â”œâ”€â”€ .env                    â† Config (PORT=3001, etc)
  â”‚   â”‚   â””â”€â”€ package.json
  â”‚   â”‚
  â”‚   â”œâ”€â”€ marketplace/                â† Porta 3002
  â”‚   â”œâ”€â”€ academy/                    â† Porta 3003
  â”‚   â””â”€â”€ business/                   â† Porta 3004
  â”‚
  â”œâ”€â”€ ğŸ“ docs/                        â† DocumentaÃ§Ã£o
  â”‚   â”œâ”€â”€ ARCHITECTURE.md             â† âœ… NOVO: Arquitetura
  â”‚   â”œâ”€â”€ RECOVERY_CHECKLIST.md       â† âœ… NOVO: Como recuperar
  â”‚   â””â”€â”€ stories/                    â† HistÃ³rias de user stories
  â”‚
  â”œâ”€â”€ .env                            â† VariÃ¡veis globais
  â”œâ”€â”€ package.json                    â† Workspaces config
  â”œâ”€â”€ docker-compose.yml              â† PostgreSQL + serviÃ§os
  â””â”€â”€ README.md                       â† âœ… ATUALIZADO: Portas

  IMPORTANTE:
  - Cada serviÃ§o tem seu prÃ³prio package.json
  - Cada serviÃ§o tem seu prÃ³prio .env
  - Todos usam a mesma PostgreSQL
  - Frontend estÃ¡ separado em frontend/apps/

  ---
  6ï¸âƒ£ BANCO DE DADOS - As 4 DimensÃµes

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚         PostgreSQL na Porta 5432                     â”‚
  â”‚    (Um banco, mas 4 "divisÃµes" separadas)           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  DATABASE: "iamenu"
  â”‚
  â”œâ”€ SCHEMA: "community" (16 tabelas)
  â”‚  â”œâ”€ posts              â† Posts do fÃ³rum
  â”‚  â”œâ”€ comments           â† ComentÃ¡rios
  â”‚  â”œâ”€ groups             â† Grupos (ex: "Restauradores de Lisboa")
  â”‚  â”œâ”€ profiles           â† Perfis de usuÃ¡rios
  â”‚  â”œâ”€ notifications      â† NotificaÃ§Ãµes em tempo real
  â”‚  â”œâ”€ followers          â† Quem segue quem
  â”‚  â””â”€ ... (mais 10 tabelas de gamificaÃ§Ã£o, moderation)
  â”‚
  â”œâ”€ SCHEMA: "marketplace" (10 tabelas)
  â”‚  â”œâ”€ suppliers          â† Fornecedores
  â”‚  â”œâ”€ products           â† Produtos
  â”‚  â”œâ”€ quotes             â† CotaÃ§Ãµes (RFQ)
  â”‚  â”œâ”€ reviews            â† AvaliaÃ§Ãµes
  â”‚  â””â”€ ... (mais 6 tabelas de preÃ§os, negÃ³cios)
  â”‚
  â”œâ”€ SCHEMA: "academy" (5 tabelas)
  â”‚  â”œâ”€ courses            â† Cursos
  â”‚  â”œâ”€ modules            â† MÃ³dulos de cursos
  â”‚  â”œâ”€ lessons            â† LiÃ§Ãµes
  â”‚  â”œâ”€ enrollments        â† InscriÃ§Ãµes
  â”‚  â””â”€ certificates       â† Certificados
  â”‚
  â””â”€ SCHEMA: "business" (6 tabelas)
     â”œâ”€ restaurants        â† Restaurantes
     â”œâ”€ orders             â† Pedidos
     â”œâ”€ daily_stats        â† EstatÃ­sticas diÃ¡rias
     â””â”€ ... (mais 3 tabelas de configuraÃ§Ãµes)

  IMPORTANTE:
  - Cada API sÃ³ acessa seu SCHEMA
  - NÃ£o hÃ¡ relacionamentos entre schemas
  - Cada API gerencia suas prÃ³prias migrations
  - Tudo compartilha mesma PostgreSQL (mais barato, mais simples)

  ---
  7ï¸âƒ£ FLUXO COMPLETO DE AUTENTICAÃ‡ÃƒO (O JWT)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚      COMO A AUTENTICAÃ‡ÃƒO FUNCIONA (JWT)             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  PASSO 1: OBTER TOKEN
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Frontend: GET /api/v1/community/auth/      â”‚
  â”‚                        test-token          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Backend: Gera JWT token com assinatura:   â”‚
  â”‚ {                                          â”‚
  â”‚   "userId": "user-123",                   â”‚
  â”‚   "email": "user@example.com",            â”‚
  â”‚   "role": "user",                         â”‚
  â”‚   "iat": 1707922000,                      â”‚
  â”‚   "exp": 1707925600                       â”‚
  â”‚ }                                          â”‚
  â”‚                                            â”‚
  â”‚ Assinado com: JWT_SECRET = "dev-secret"  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Frontend: Recebe e armazena em             â”‚
  â”‚ localStorage['auth_token'] = "eyJ..."      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  PASSO 2: USAR TOKEN EM REQUISIÃ‡Ã•ES
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Frontend: GET /api/v1/community/           â”‚
  â”‚                    notifications           â”‚
  â”‚ Header: "Authorization: Bearer eyJ..."    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Backend Middleware:                        â”‚
  â”‚ 1. Extrai token do header                 â”‚
  â”‚ 2. Decodifica com JWT_SECRET              â”‚
  â”‚ 3. Valida assinatura                      â”‚
  â”‚ 4. Valida expiration time                 â”‚
  â”‚ 5. Attach user ao request                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€ VÃ¡lido â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                     â–¼
               â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚          â”‚ Executa endpoint    â”‚
               â”‚          â”‚ req.user tem dados  â”‚
               â”‚          â”‚ Retorna 200 âœ…      â”‚
               â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â””â”€ InvÃ¡lido/Expirado â”€â”
                                     â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Retorna 403 Forbidden
                        â”‚ ou 401 Unauthorized â”‚
                        â”‚ Token invÃ¡lido âŒ   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  PROBLEMA ANTERIOR:
  - CORS bloqueava antes do auth middleware rodar
  - Browser retornava 403 CORS
  - Nunca chegava ao backend validar token
  - AGORA CORRIGIDO! âœ…

  ---
  8ï¸âƒ£ ANTES vs DEPOIS (O que foi consertado)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              ANTES vs DEPOIS                         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ANTES (CONFUSO):
     Frontend (5173)
          â”‚
          â–¼ âŒ CORS BLOQUEADO
     Marketplace API (3002)
     - Origem: sÃ³ aceitava 5173
     - Quando chamava de 5174: erro CORS

     Academy API (3003)
     - Origem: aceitava TUDO (*)
     - Inseguro! Qualquer um pode chamar

     Business API (3004)
     - Esperava: ALLOWED_ORIGINS
     - Mas .env tinha: CORS_ORIGIN
     - Mismatch â†’ falha

  DEPOIS (ORGANIZADO):
     Frontend (5173, 5174, 5175)
          â”‚
          â–¼ âœ… CORS ACEITA (todas as portas)
     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼         â–¼        â–¼        â–¼
   3001      3002     3003     3004
   Todos com mesma configuraÃ§Ã£o:
   origin: process.env.CORS_ORIGIN?.split(',')
           || ['http://localhost:5173']

   VariÃ¡vel: CORS_ORIGIN=http://localhost:5173,...
   Aplicada: Em TODOS os 4 serviÃ§os âœ…

  ---
  9ï¸âƒ£ SEQUÃŠNCIA COMPLETA DE UMA REQUISIÃ‡ÃƒO (Zoom In)

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  CLIQUE â†’ RESPOSTA (O caminho completo)             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  USER CLICA "VER FORNECEDORES" (em localhost:5173)
  â”‚
  â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ React dispara:                             â”‚
  â”‚ GET /api/v1/marketplace/suppliers          â”‚
  â”‚ Header: Authorization: Bearer <token>      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ PASSO 1: SAIR DO BROWSER
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Browser faz preflight request (OPTIONS)    â”‚
  â”‚ Origin: http://localhost:5173              â”‚
  â”‚ Pergunta: "Posso fazer requisiÃ§Ã£o?"        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ PASSO 2: CHEGAR AO MARKETPLACE (3002)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Middleware CORS valida:                    â”‚
  â”‚ âœ“ Origin (5173) estÃ¡ na whitelist?         â”‚
  â”‚ âœ“ Method GET Ã© permitido?                  â”‚
  â”‚ âœ“ Headers Authorization Ã© permitido?       â”‚
  â”‚                                            â”‚
  â”‚ Se tudo OK: Responde com 204 No Content    â”‚
  â”‚ (ou retorna CORS headers no response)      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ PASSO 3: BROWSER PERMITE REQUISIÃ‡ÃƒO
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Browser envia requisiÃ§Ã£o real (GET):       â”‚
  â”‚ Authorization: Bearer <token>              â”‚
  â”‚ para http://localhost:3002/api/v1/...      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ PASSO 4: MARKETPLACE API PROCESSA
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Marketplace (3002) recebe requisiÃ§Ã£o       â”‚
  â”‚ 1. Auth middleware valida JWT              â”‚
  â”‚    âœ“ Signature vÃ¡lida? (JWT_SECRET)        â”‚
  â”‚    âœ“ Token expirado?                       â”‚
  â”‚    âœ“ Attach user ao request                â”‚
  â”‚ 2. Route handler:                          â”‚
  â”‚    GET /suppliers                          â”‚
  â”‚ 3. Consulta banco de dados (PostgreSQL)    â”‚
  â”‚ 4. Retorna JSON com fornecedores           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ PASSO 5: RESPOSTA VOLTA
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Marketplace envia resposta com:            â”‚
  â”‚ - CORS headers (Access-Control-Allow-...)  â”‚
  â”‚ - 200 OK                                   â”‚
  â”‚ - JSON: [                                  â”‚
  â”‚     {id: 1, name: "Fornecedor A"},        â”‚
  â”‚     {id: 2, name: "Fornecedor B"},        â”‚
  â”‚     ...                                    â”‚
  â”‚   ]                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ PASSO 6: BROWSER ACEITA
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Browser valida CORS headers                â”‚
  â”‚ âœ“ Response origin matches request origin   â”‚
  â”‚ âœ“ Passa JSON para React                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ PASSO 7: REACT RENDERIZA
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ React state atualizado:                    â”‚
  â”‚ suppliers = [...dados retornados...]       â”‚
  â”‚ Componente re-renderiza                    â”‚
  â”‚ UsuÃ¡rio vÃª tabela de fornecedores! âœ…      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  TEMPO TOTAL: ~200-500ms (bem rÃ¡pido!)

  ---
  ğŸ¯ RESUMO VISUAL

                      5173/5174/5175
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  FRONTEND   â”‚
                      â”‚   REACT     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   CORS Middleware   â”‚
                  â”‚  (AGORA CONSISTENTE)â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                 â”‚                 â”‚
        3001              3002              3003      3004
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Communityâ”‚       â”‚Marketplace      â”‚Academy â”‚ â”‚Businessâ”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚          â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                      â”‚ PostgreSQL  â”‚
                      â”‚  Port 5432  â”‚
                      â”‚ 4 Schemas   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Cada seta = uma requisiÃ§Ã£o HTTP com JWT token
  Cada porta = um serviÃ§o independente
  Um banco = dados organizados em 4 "gavetas"

  ---
  Agora faz sentido? ğŸ˜Š

  O "quebra-cabeÃ§as" Ã© na verdade bem simples:
  - 1 Frontend (5173)
  - 4 APIs (3001-3004)
  - 1 Banco de Dados (5432)
  - Tudo conectado com HTTP + JWT + CORS

  O problema era que CORS estava inconsistente - agora estÃ¡ padronizado! âœ…