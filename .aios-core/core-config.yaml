# ============================================
# AIOS Core Configuration
# Version: 2.3.0 (Updated from SynkraAI/aios-core)
# Project: iaMenu Ecosystem
# Last Updated: 2026-01-31
# ============================================

# ============================================
# SECTION 1: Framework Metadata
# ============================================
markdownExploder: true

project:
  type: brownfield
  installedAt: '2026-01-29T22:10:53.486Z'
  version: "2.3.0"

# ============================================
# SECTION 2: IDE Configuration
# ============================================
ide:
  selected:
    - claude-code
  configs:
    vscode: false
    cursor: false
    windsurf: false
    zed: false
    claude-desktop: false
    claude-code: true

# ============================================
# SECTION 3: MCP Configuration
# ============================================
mcp:
  enabled: false
  configLocation: .claude/mcp.json

  docker_mcp:
    enabled: false

    gateway:
      transport: http
      url: "http://localhost:8080/mcp"
      port: 8080
      watch: true
      service_file: ".docker/mcp/gateway-service.yml"

    presets:
      minimal:
        servers: [context7, desktop-commander, playwright]
        description: "Core MCPs - no API keys required"
        api_keys_required: false
        estimated_tokens: "10-15k"

      full:
        servers: [context7, desktop-commander, playwright, exa]
        description: "All MCPs - requires EXA_API_KEY for exa"
        api_keys_required: true
        estimated_tokens: "20-25k"

    defaultPreset: minimal

    defaultServers:
      - name: context7
        description: "Up-to-date library documentation for LLMs"
        config: {}
        required: true
        api_key_required: false

      - name: desktop-commander
        description: "File management, terminal commands, and system operations"
        config:
          paths:
            - "${USER_HOME}"
        required: true
        api_key_required: false

      - name: playwright
        description: "Browser automation for testing and web interaction"
        config: {}
        required: true
        api_key_required: false

      - name: exa
        description: "AI-powered web search and content extraction"
        config:
          apiKeys:
            EXA_API_KEY: "${EXA_API_KEY}"
        required: false
        api_key_required: true

    commands:
      start_gateway: "docker compose -f .docker/mcp/gateway-service.yml up -d"
      stop_gateway: "docker compose -f .docker/mcp/gateway-service.yml down"
      gateway_health: "curl http://localhost:8080/health"
      list_servers: "docker mcp server ls"
      enable_server: "docker mcp server enable {name}"
      disable_server: "docker mcp server disable {name}"

# ============================================
# SECTION 4: Documentation Paths
# ============================================
qa:
  qaLocation: docs/qa

prd:
  prdFile: docs/prd.md
  prdVersion: v4
  prdSharded: true
  prdShardedLocation: docs/prd
  epicFilePattern: "epic-{n}*.md"

architecture:
  architectureFile: docs/architecture.md
  architectureVersion: v4
  architectureSharded: true
  architectureShardedLocation: docs/architecture

customTechnicalDocuments: null

devLoadAlwaysFiles:
  - docs/framework/coding-standards.md
  - docs/framework/tech-stack.md
  - docs/framework/source-tree.md

devLoadAlwaysFilesFallback:
  - docs/architecture/padroes-de-codigo.md
  - docs/architecture/pilha-tecnologica.md
  - docs/architecture/arvore-de-origem.md

devDebugLog: .ai/debug-log.md
devStoryLocation: docs/stories
slashPrefix: AIOS
frameworkDocsLocation: docs/framework
projectDocsLocation: docs/architecture/project-decisions

# ============================================
# SECTION 5: Resource Locations
# ============================================
toolsLocation: .aios-core/tools

scriptsLocation:
  core: .aios-core/core
  development: .aios-core/development/scripts
  infrastructure: .aios-core/infrastructure/scripts
  legacy: .aios-core/scripts

dataLocation: .aios-core/data
elicitationLocation: .aios-core/elicitation
expansionPacksLocation: expansion-packs
mindsLocation: outputs/minds

# Agent-specific Resource Locations
agentLocations:
  # DevOps & CI/CD
  cicdLocation: .github/workflows
  githubLocation: .github

  # Data & Database
  etlLocation: services
  databaseLocation: services

  # Design & UX
  uxLocation: docs/design

  # Analysis & Research
  analyticsLocation: docs/analytics

  # Templates (shared by po, architect, sm)
  templatesLocation: .aios-core/development/templates

# ============================================
# SECTION 6: Performance & Caching
# ============================================
lazyLoading:
  enabled: true
  heavySections:
    - pvMindContext
    - expansionPacks
    - squads
    - registry

git:
  showConfigWarning: true
  cacheTimeSeconds: 300

# ============================================
# SECTION 7: Logging & Status
# ============================================
decisionLogging:
  enabled: true
  async: true
  location: .ai/
  indexFile: decision-logs-index.md
  format: adr
  performance:
    maxOverhead: 50

projectStatus:
  enabled: true
  autoLoadOnAgentActivation: true
  showInGreeting: true
  cacheTimeSeconds: 60
  components:
    gitBranch: true
    gitStatus: true
    recentWork: true
    currentEpic: true
    currentStory: true
  statusFile: .aios/project-status.yaml
  maxModifiedFiles: 5
  maxRecentCommits: 2

agentIdentity:
  greeting:
    contextDetection: true
    sessionDetection: hybrid
    workflowDetection: hardcoded
    performance:
      gitCheckCache: true
      gitCheckTTL: 300

# ============================================
# SECTION 8: GitHub Integration
# ============================================
github:
  enabled: true
  cli_required: false
  features:
    pr_creation: true
    issue_management: true

  pr:
    title_format: conventional
    include_story_id: true

    conventional_commits:
      enabled: true
      branch_type_map:
        feature/: feat
        feat/: feat
        fix/: fix
        bugfix/: fix
        hotfix/: fix
        docs/: docs
        chore/: chore
        refactor/: refactor
        test/: test
        perf/: perf
        ci/: ci
        style/: style
        build/: build
      default_type: feat

    auto_assign_reviewers: false
    draft_by_default: false

  semantic_release:
    enabled: true

# ============================================
# SECTION 9: CodeRabbit Integration (Story 6.3.3)
# ============================================
coderabbit_integration:
  enabled: false  # Enable when CodeRabbit CLI is installed
  installation_mode: wsl
  wsl_config:
    distribution: Ubuntu
    installation_path: ~/.local/bin/coderabbit
    working_directory: ${PROJECT_ROOT}

  self_healing:
    enabled: true
    type: full
    max_iterations: 3
    timeout_minutes: 30

  severity_handling:
    CRITICAL: auto_fix
    HIGH: auto_fix
    MEDIUM: document_as_debt
    LOW: ignore

  graceful_degradation:
    skip_if_not_installed: true
    fallback_message: "CodeRabbit CLI not found. Skipping automated review."

  commands:
    qa_pre_review_uncommitted: |
      wsl bash -c 'cd ${PROJECT_ROOT} && ~/.local/bin/coderabbit --prompt-only -t uncommitted'
    qa_story_review_committed: |
      wsl bash -c 'cd ${PROJECT_ROOT} && ~/.local/bin/coderabbit --prompt-only -t committed --base main'

  report_location: docs/qa/coderabbit-reports/

# ============================================
# SECTION 10: Squads System
# ============================================
squads:
  templateLocation: templates/squad
  autoLoad: false

pvMindContext:
  enabled: false
  location: outputs/minds/pedro_valerio
  features:
    persona_voice: true
    technical_depth: advanced
    communication_style: structured

storyBacklog:
  enabled: true
  location: docs/stories/backlog
  prioritization: value_risk

# ============================================
# SECTION 11: IDE Sync System (Story 6.19)
# ============================================
ideSync:
  enabled: true
  source: .aios-core/development/agents

  targets:
    claude-code:
      enabled: true
      path: .claude/commands/AIOS/agents
      format: full-markdown-yaml
    cursor:
      enabled: false
      path: .cursor/rules/agents
      format: condensed-rules
    windsurf:
      enabled: false
      path: .windsurf/rules/agents
      format: xml-tagged-markdown
    trae:
      enabled: false
      path: .trae/rules/agents
      format: project-rules
    antigravity:
      enabled: false
      path: .antigravity/rules/agents
      format: cursor-style

  redirects: {}

  validation:
    strictMode: true
    failOnDrift: true
    failOnOrphaned: false

# ============================================
# SECTION 12: Auto-Claude Configuration (ADE)
# ============================================
autoClaude:
  enabled: true
  version: "3.0"
  migratedAt: "2026-01-31T00:00:00Z"

  worktree:
    enabled: false  # Enable for git worktree automation
    autoCreate: on_story_start
    autoCleanup: manual
    maxWorktrees: 10
    staleDays: 30
    branchPrefix: "auto-claude/"

  specPipeline:
    enabled: false  # Enable for spec automation

  execution:
    enabled: false  # Enable for autonomous execution

  qaLoop:
    enabled: false  # Enable for QA loop automation
    maxIterations: 5

  qa:
    enabled: false
